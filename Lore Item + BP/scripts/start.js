import * as lore from '\u0040\u006d\u0069\u006e\u0065\u0063\u0072\u0061\u0066\u0074\u002f\u0073\u0065\u0072\u0076\u0065\u0072\u002d\u0075\u0069'
import { \u0077\u006f\u0072\u006c\u0064,\u0073\u0079\u0073\u0074\u0065\u006d } from '\u0040\u006d\u0069\u006e\u0065\u0063\u0072\u0061\u0066\u0074\u002f\u0073\u0065\u0072\u0076\u0065\u0072'
import { \u004d\u006f\u0064\u0061\u006c\u0046\u006f\u0072\u006d\u0044\u0061\u0074\u0061 } from "\u0040\u006d\u0069\u006e\u0065\u0063\u0072\u0061\u0066\u0074\u002f\u0073\u0065\u0072\u0076\u0065\u0072\u002d\u0075\u0069"

function general(\u0070\u006c\u0061\u0079\u0065\u0072) {
    const form = new lore.ActionFormData()
    form.title(`\u0048\u006f\u006d\u0065\u0020\u004c\u006f\u0072\u0065`)
    form.body(`\u0048\u0069\u0020\u00a7\u0062${player.nameTag} \n\u00a7\u0072\u0054\u0068\u0061\u006e\u006b\u0073\u0020\u0066\u006f\u0072\u0020\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020\u006d\u0079\u0020\u0061\u0064\u0064\u002d\u006f\u006e\u0021\n\u0077\u0069\u0074\u0068\u0020\u0074\u0068\u0069\u0073\u0020\u0061\u0064\u0064\u006f\u006e\u0020\u0079\u006f\u0075\u0020\u0063\u0061\u006e\u0020\u0061\u0064\u0064\u0020\u0063\u0075\u0073\u0074\u006f\u006d\u0020\u006e\u0061\u006d\u0065\u0020\u0061\u006e\u0064\u0020\u006c\u006f\u0072\u0065\u0020\u0074\u006f\u0020\u0079\u006f\u0075\u0072\u0020\u0069\u0074\u0065\u006d\u002c\n\u0062\u0065\u0066\u006f\u0072\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0065\u0064\u0069\u006e\u0067\u0020\u0063\u0068\u0065\u0063\u006b\u0020\u0074\u0068\u0065\u0020\u0072\u0065\u0071\u0075\u0069\u0072\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u006f\u006e\u0020\u00a7\u0065\u0072\u0075\u006c\u0065\u0073\u0021\u0020`)
    form.button(`\u0045\u0064\u0069\u0074\u0020\u004c\u006f\u0072\u0065`, '\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u002f\u0075\u0069\u002f\u006d\u0061\u0073\u0068\u0075\u0070\u005f\u0050\u0061\u0069\u006e\u0074\u0042\u0072\u0075\u0073\u0068') 
    form.button(`\u0052\u0075\u006c\u0065\u0073`,'\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u002f\u0075\u0069\u002f\u0069\u0063\u006f\u006e\u005f\u0062\u006f\u006f\u006b\u005f\u0077\u0072\u0069\u0074\u0061\u0062\u006c\u0065') 
    form.button(`\u0043\u0072\u0065\u0064\u0069\u0074`,'\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u002f\u0075\u0069\u002f\u0069\u0063\u006f\u006e\u005f\u0062\u0065\u0073\u0074\u0033')

        form.show(\u0070\u006c\u0061\u0079\u0065\u0072).then(result => {
            if (result.selection === 0) {
              player.runCommandAsync("\u0074\u0061\u0067\u0020\u0040\u0073\u0020\u0061\u0064\u0064\u0020\u006c\u006f\u0072\u0065\u0049\u0074\u0065\u006d\u0055\u0069");
              player.runCommandAsync("\u0074\u0061\u0067\u0020\u0040\u0073\u0020\u0072\u0065\u006d\u006f\u0076\u0065\u0020\u0041\u0064\u006d\u0069\u006e");
              player.runCommandAsync("\u0066\u0075\u006e\u0063\u0074\u0069\u006f\u006e\u0020\u0061\u0063\u0074\u0069\u0076\u0065\u005f\u006c\u006f\u0072\u0065\u005f\u0062\u0061\u0073\u0065");
            }
            if (result.selection === 1) {
                const form = new lore.ActionFormData()
                form.title(`\u0052\u0075\u006c\u0065\u0073`)
                form.body(`\ue0f3\ue0fc\n\u00a7\u0066\u0048\u0069 \n§b${player.nameTag} \n\u00a7\u0061\u0048\u0065\u0072\u0065\u0020\u0069\u0073\u0020\u0074\u0068\u0065\u0020\u0072\u0065\u0067\u0075\u006c\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u006f\u0020\u0062\u0065\u0073\u0074\u0020\u0075\u0073\u0065\u0020\u0074\u0068\u0065\u0020\u0061\u0064\u0064\u006f\u006e\u002e\u00a7\u0072\n\n\u0031\u0029\u0020\u0043\u0068\u0065\u0063\u006b\u0020\u0069\u0066\u0020\u0079\u006f\u0075\u0020\u0068\u0061\u0076\u0065\u0020\u0074\u0068\u0065\u0020\u0061\u0064\u006d\u0069\u006e\u0020\u0074\u0061\u0067\n\n\u0032\u0029\u0020\u0055\u0073\u0065\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u002d\u0073\u0070\u0065\u0063\u0069\u0066\u0069\u0063\u0020\u0061\u0064\u0064\u006f\u006e\n\n\u0033\u0029\u0020\u0043\u0068\u0065\u0063\u006b\u0020\u0069\u0066\u0020\u0079\u006f\u0075\u0020\u0061\u0072\u0065\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0068\u0065\u0020\u0053\u0065\u0072\u0076\u0065\u0072\u002f\u0052\u0065\u0061\u006c\u006d\u0073\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006f\u0072\u0020\u0074\u0068\u0065\u0020\u0053\u0074\u0061\u006e\u0064\u0061\u0072\u0064\u0020\u0077\u006f\u0072\u006c\u0064\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\n\n\u0034\u0029\u0020\u0043\u006c\u0069\u0063\u006b\u0020\u006f\u006e\u0020\u0074\u0068\u0065\u0020\u0027\u00a7\u0062\u0065\u0064\u0069\u0074\u0020\u006c\u006f\u0072\u0065\u00a7\u0072\u0027\u0020\u0062\u0075\u0074\u0074\u006f\u006e\u0020\u0061\u006e\u0064\u0020\u0079\u006f\u0075\u0020\u0077\u0069\u006c\u006c\u0020\u0072\u0065\u0063\u0065\u0069\u0076\u0065\u0020\u0061\u0020\u0063\u006f\u006e\u0066\u0069\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0069\u0066\u0069\u0063\u0061\u0074\u0069\u006f\u006e\u0020\u006f\u0066\u0020\u0061\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006f\u006e\n\n\u0035\u0029\u0020\u0054\u006f\u0020\u006d\u006f\u0064\u0069\u0066\u0079\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0066\u0020\u0074\u0068\u0065\u0020\u0069\u0074\u0065\u006d\u0020\u0061\u006e\u0064\u0020\u0069\u0074\u0073\u0020\u006c\u006f\u0072\u0065\u002c\u0020\u0079\u006f\u0075\u0020\u006d\u0075\u0073\u0074\u0020\u0063\u0072\u006f\u0075\u0063\u0068\u002e\n\n\u0036\u0029\u0020\u0049\u0066\u0020\u0079\u006f\u0075\u0020\u0077\u0061\u006e\u0074\u0020\u0074\u006f\u0020\u006d\u006f\u0064\u0069\u0066\u0079\u0020\u006d\u0075\u006c\u0074\u0069\u0070\u006c\u0065\u0020\u0069\u0074\u0065\u006d\u0073\u002c\u0020\u0072\u0065\u0070\u0065\u0061\u0074\u0020\u0074\u0068\u0065\u0020\u0073\u0061\u006d\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0020\u0075\u006e\u0074\u0069\u006c\u0020\u0079\u006f\u0075\u0020\u0061\u0072\u0065\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\n\n\u0037\u0029\u0020\u0054\u006f\u0020\u0065\u0078\u0069\u0074\u0020\u0074\u0068\u0065\u0020\u0065\u0064\u0069\u0074\u0069\u006e\u0067\u0020\u006d\u006f\u0064\u0065\u0020\u006c\u006f\u0072\u0065\u002c\u0020\u0063\u006c\u0069\u0063\u006b\u0020\u0077\u0069\u0074\u0068\u0020\u0074\u0068\u0065\u0020\u0027\u0069\u0074\u0065\u006d\u0020\u006c\u006f\u0072\u0065\u0020\u0065\u0064\u0069\u0074\u0027\u0020\u0061\u006e\u0064\u0020\u0074\u0068\u0065\u006e\u0020\u0063\u006c\u0069\u0063\u006b\u0020\u00a7\u0062\u0027\u0045\u0078\u0069\u0074\u0020\u004c\u006f\u0072\u0065\u0020\u0045\u0064\u0069\u0074\u0027\u00a7\u0072\u002c\u0020\u0073\u006f\u0020\u0079\u006f\u0075\u0020\u0077\u0069\u006c\u006c\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0020\u0074\u006f\u0020\u0074\u0068\u0065\u0020\u006e\u006f\u0072\u006d\u0061\u006c\u0020\u006d\u006f\u0064\u0065\u0020\u006f\u0066\u0020\u0074\u0068\u0065\u0020\u0067\u0061\u006d\u0065\n\n\n\n§c\u0038\u0029\u0020\u004d\u006f\u0064\u0069\u0066\u0079\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u0020\u0061\u006e\u0064\u0020\u0061\u0064\u0064\u006f\u006e\u0073\u0020\u0069\u0073\u0020\u0070\u0072\u006f\u0068\u0069\u0062\u0069\u0074\u0065\u0064\n\n\u0039\u0029\u0020\u0049\u0074\u0020\u0069\u0073\u0020\u0066\u006f\u0072\u0062\u0069\u0064\u0064\u0065\u006e\u0020\u0074\u006f\u0020\u0075\u0070\u006c\u006f\u0061\u0064\u0020\u0074\u006f\u0020\u0065\u0078\u0074\u0065\u0072\u006e\u0061\u006c\u0020\u0077\u0065\u0062\u0073\u0069\u0074\u0065\u0073\u0020\u0077\u0069\u0074\u0068\u006f\u0075\u0074\u0020\u0061\u0075\u0074\u0068\u006f\u0072\u0069\u007a\u0061\u0074\u0069\u006f\u006e\n\n\u0031\u0030\u0029\u0020\u0049\u0074\u0020\u0069\u0073\u0020\u0066\u006f\u0072\u0062\u0069\u0064\u0064\u0065\u006e\u0020\u0074\u006f\u0020\u0061\u0070\u0070\u0072\u006f\u0070\u0072\u0069\u0061\u0074\u0065\u0020\u0074\u0068\u0065\u0020\u0061\u0064\u0064\u006f\u006e\u0020\u0061\u006e\u0064\u0020\u0072\u0065\u006d\u006f\u0076\u0065\u0020\u0063\u0072\u0065\u0061\u0074\u006f\u0072\u0020\u0063\u0072\u0065\u0064\u0069\u0074\u0073`)
                form.button(`\u0042\u0061\u0063\u006b`, '\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u002f\u0075\u0069\u002f\u0069\u006d\u0070\u006f\u0072\u0074') 
              
                    form.show(\u0070\u006c\u0061\u0079\u0065\u0072).then(result => {
                        if (result.selection === 0) {
                          general(\u0070\u006c\u0061\u0079\u0065\u0072)
                        }
                     }
                  )
            }
            if (result.selection === 2) {
              const form = new lore.ActionFormData()
              form.title(`\u0043\u0072\u0065\u0064\u0069\u0074`)
              form.body(`\ue0f3\ue0fc\n\ue0f4\n§b${player.nameTag} \n\u00a7\u0066\u0054\u0068\u0061\u006e\u006b\u0020\u0079\u006f\u0075\u0020\u0066\u006f\u0072\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u006d\u0079\u0020\u0061\u0064\u0064\u006f\u006e\u002c\u0020\u0049\u0020\u0068\u006f\u0070\u0065\u0020\u0079\u006f\u0075\u0020\u0065\u006e\u006a\u006f\u0079\u0020\u0069\u0074\u002e\u0020\u0046\u006f\u0072\u0020\u0061\u006e\u0079\u0020\u0069\u0073\u0073\u0075\u0065\u0073\u002c\u0020\u0070\u006c\u0065\u0061\u0073\u0065\u0020\u0072\u0065\u0070\u006f\u0072\u0074\u0020\u0074\u0068\u0065\u006d\u0020\u006f\u006e\u0020\u00a7\u0063\u0059\u006f\u0075\u0054\u0075\u0062\u0065\u00a7\u0066\u002c\u0020\u00a7\u0064\u0049\u006e\u0073\u0074\u0061\u0067\u0072\u0061\u006d\u00a7\u0066\u002c\u0020\u00a7\u0062\u0054\u0077\u0069\u0074\u0074\u0065\u0072\u00a7\u0066\u002c\u0020\u00a7\u0062\u0047\u0069\u0074\u0048\u0075\u0062\u00a7\u0066\u002c\u0020\u006f\u0072\u0020\u00a7\u0061\u004d\u0043\u0050\u0044\u004c\n\u00a7\u0072\u0049\u0020\u0061\u006d\u0020\u0044\u0065\u0061\u0074\u0068\u005f\u0041\u0072\u0075\u0062\u0061\u006e\u0020\u0061\u0020\u0064\u0065\u0076\u0065\u006c\u006f\u0070\u0065\u0072\u0020\u0061\u006e\u0064\u0020\u0067\u0072\u0061\u0070\u0068\u0069\u0063\u0020\u0064\u0065\u0073\u0069\u0067\u006e\u0065\u0072\u002e\u0020\u0049\u0066\u0020\u0079\u006f\u0075\u0020\u0077\u006f\u0075\u006c\u0064\u0020\u006c\u0069\u006b\u0065\u0020\u0074\u006f\u0020\u0073\u0065\u0065\u0020\u006d\u006f\u0072\u0065\u0020\u006f\u0066\u0020\u006d\u0079\u0020\u0077\u006f\u0072\u006b\u002c\u0020\u0070\u006c\u0065\u0061\u0073\u0065\u0020\u0076\u0069\u0073\u0069\u0074\u0020\u0074\u0068\u0065\u0020\u0077\u0065\u0062\u0073\u0069\u0074\u0065\u0073\u0020\u006c\u0069\u0073\u0074\u0065\u0064\u0020\u0062\u0065\u0066\u006f\u0072\u0065\u002e`)
              form.button(`\u0042\u0061\u0063\u006b`, '\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u002f\u0075\u0069\u002f\u0069\u006d\u0070\u006f\u0072\u0074') 
            
                  form.show(\u0070\u006c\u0061\u0079\u0065\u0072).then(result => {
                      if (result.selection === 0) {
                        general(\u0070\u006c\u0061\u0079\u0065\u0072)
                      }
                   }
                )
            }
        }
    )
}

function exit_ui(\u0070\u006c\u0061\u0079\u0065\u0072) {
  const form = new lore.ActionFormData()
  
  form.title(`\u004c\u006f\u0072\u0065\u0020\u0045\u0064\u0069\u0074\u0020\u0041\u0063\u0074\u0069\u0076\u0065`)
  form.body(`\ue0f3\ue0fc\u00a7\u0062\n${player.nameTag} \n§f\u0059\u006f\u0075\u0020\u0061\u0072\u0065\u0020\u0063\u0075\u0072\u0072\u0065\u006e\u0074\u006c\u0079\u0020\u0069\u006e\u0020\u0065\u0064\u0069\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u0061\u006e\u0064\u0020\u0069\u0074\u0065\u006d\u0020\u006c\u006f\u0072\u0065\u0020\u006d\u006f\u0064\u0065`)
  form.button(`\u0045\u0078\u0069\u0074\u0020\u004c\u006f\u0072\u0065\u0020\u0045\u0064\u0069\u0074`, '\u0074\u0065\u0078\u0074\u0075\u0072\u0065\u0073\u002f\u0075\u0069\u002f\u0045\u0072\u0072\u006f\u0072\u0047\u006c\u0079\u0070\u0068') 

      form.show(\u0070\u006c\u0061\u0079\u0065\u0072).then(result => {
          if (result.selection === 0) {
            player.runCommandAsync("\u0074\u0061\u0067\u0020\u0040\u0073\u0020\u0072\u0065\u006d\u006f\u0076\u0065\u0020\u006c\u006f\u0072\u0065\u0049\u0074\u0065\u006d\u0055\u0069");
            player.runCommandAsync("\u0074\u0061\u0067\u0020\u0040\u0073\u0020\u0061\u0064\u0064\u0020\u0041\u0064\u006d\u0069\u006e");
            player.runCommandAsync("\u0066\u0075\u006e\u0063\u0074\u0069\u006f\u006e\u0020\u0061\u0063\u0074\u0069\u0076\u0065\u005f\u006c\u006f\u0072\u0065\u005f\u0062\u0061\u0073\u0065");
          }
       }
    )
}

world.events.beforeItemUse.subscribe(ev => {
    const item = ev.\u0069\u0074\u0065\u006d
    const player = ev.\u0073\u006f\u0075\u0072\u0063\u0065
    if(player.\u0068\u0061\u0073\u0054\u0061\u0067("\u0041\u0064\u006d\u0069\u006e")){
      if(item.typeId == '\u0064\u0061\u003a\u006c\u006f\u0072\u0065\u005f\u0075\u0069'){ general(\u0070\u006c\u0061\u0079\u0065\u0072)}
    }
    else {
      if (player.\u0068\u0061\u0073\u0054\u0061\u0067("\u006c\u006f\u0072\u0065\u0049\u0074\u0065\u006d\u0055\u0069")){ 
       if(item.typeId == '\u0064\u0061\u003a\u006c\u006f\u0072\u0065\u005f\u0075\u0069'){ exit_ui(\u0070\u006c\u0061\u0079\u0065\u0072) }
      }
     }
   }
 )

 system.runInterval(() => {
  let players = world.getAllPlayers();
  for (let player of players) {
     if (player.hasTag("\u006c\u006f\u0072\u0065\u0049\u0074\u0065\u006d\u0055\u0069")){
          if(player.isSneaking == true){
           let {container} = player.getComponent("\u006d\u0069\u006e\u0065\u0063\u0072\u0061\u0066\u0074\u003a\u0069\u006e\u0076\u0065\u006e\u0074\u006f\u0072\u0079")
           let Item = container.\u0067\u0065\u0074\u0049\u0074\u0065\u006d(player.\u0073\u0065\u006c\u0065\u0063\u0074\u0065\u0064\u0053\u006c\u006f\u0074)
           let Lore = Item.\u0067\u0065\u0074\u004c\u006f\u0072\u0065();
           let Name = "";
           try{Name = Item.nameTag.replace(/\n/g,`\u002d\u006e`)}catch{};
     
           const form = new ModalFormData()
           form.title("\u004c\u006f\u0072\u0065\u0020\u0055\u0069\u0020\u0065\u0064\u0069\u0074")
           form.textField("\ue0f3\ue0fc\n\u0057\u0065\u006c\u0063\u006f\u006d\u0065\u0020\u0074\u006f\u0020\u0074\u0068\u0065\u0020\u0073\u0063\u0072\u0065\u0065\u006e\u0020\u0066\u006f\u0072\u0020\u006d\u006f\u0064\u0069\u0066\u0079\u0069\u006e\u0067\u0020\u0079\u006f\u0075\u0072\u0020\u0069\u0074\u0065\u006d\u002c\u0020\u0077\u0072\u0069\u0074\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0020\u0061\u006e\u0064\u0020\u006c\u006f\u0072\u0065\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0061\u0070\u0070\u0072\u006f\u0070\u0072\u0069\u0061\u0074\u0065\u0020\u0062\u006f\u0078\u0065\u0073\n\u0054\u006f\u0020\u0073\u0074\u0061\u0072\u0074\u0020\u0061\u0020\u006e\u0065\u0077\u0020\u006c\u0069\u006e\u0065\u002c\u0020\u0069\u006e\u0073\u0065\u0072\u0074\u0020\u0028\u0020\u00a7\u0063\u002d\u006e\u0020\u00a7\u0072\u0029\u0020\n\n§f\u004e\u0061\u006d\u0065\u0020\u0049\u0074\u0065\u006d","", Name)
           form.textField("\u004c\u006f\u0072\u0065\u0020\u0049\u0074\u0065\u006d","", String(Lore).replace(/\n/g,`\u002d\u006e`));
           form.show(\u0070\u006c\u0061\u0079\u0065\u0072).then(response => {
            if(response.canceled){
            } else {
              let playerNames = players.map(({name}) => name);
              Item.nameTag = response.formValues[0].replace(/\u002d\u006e/g,`\n`);
              let text = response.formValues[1]
              player.runCommandAsync("\u0066\u0075\u006e\u0063\u0074\u0069\u006f\u006e\u0020\u006c\u006f\u0072\u0065\u005f\u0069\u0074\u0065\u006d\u005f\u006e\u0061\u006d\u0065\u005f\u0063\u006f\u006e\u0066\u0069\u0072\u006d");
              Item.setLore([text.replace(/\u002d\u006e/g,`\n`)]);
              container.setItem(player.\u0073\u0065\u006c\u0065\u0063\u0074\u0065\u0064\u0053\u006c\u006f\u0074,Item);
            }
          }
        )
      }
    }
  }
 }
)
